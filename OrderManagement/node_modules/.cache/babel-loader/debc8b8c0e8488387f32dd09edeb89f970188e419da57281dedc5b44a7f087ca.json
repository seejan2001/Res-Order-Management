{"ast":null,"code":"import { createSlice, current } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nexport const Enums = Object.freeze({\n  IDLE: \"idle\",\n  LOADING: \"Loading\",\n  ERROR: \"error\"\n});\nconst foodslice = createSlice({\n  name: \"food\",\n  initialState: {\n    data: [],\n    status: Enums.IDLE,\n    cart_data: []\n  },\n  reducers: {\n    setStatus(state, action) {\n      state.status = action.payload;\n    },\n    fetchProduct(state, action) {\n      state.data = action.payload;\n    },\n    addInsideCart(state, action) {\n      console.log(action.payload.quantity);\n      if (state.cart_data.length === 0) {\n        state.cart_data.push(action.payload);\n      } else {\n        const findIndex = state.cart_data.findIndex(item => item.id === action.payload.id);\n        if (findIndex === -1) {\n          state.cart_data.push(action.payload);\n        } else state.cart_data[findIndex].quantity = parseInt(state.cart_data[findIndex].quantity) + parseInt(action.payload.quantity);\n      }\n    },\n    removeInsideCart(state, action) {\n      console.log(action);\n      state.cart_data.map(item => {\n        if (item.id === action.payload) {\n          if (item.quantity == 1) {\n            state.cart_data = state.cart_data.filter(res => res.id !== action.payload);\n          } else item.quantity -= 1;\n        }\n      }\n      // (res) => res.id !== action.payload\n      );\n    },\n\n    getDataFromCart(state, action) {\n      if (state.cart_data.length == 0) {\n        console.log(\"Empty inside cart\");\n      } else {\n        console.log(current(state.cart_data));\n      }\n    }\n  }\n});\nexport const {\n  setStatus,\n  fetchProduct,\n  addInsideCart,\n  removeInsideCart,\n  getDataFromCart\n} = foodslice.actions;\nexport default foodslice.reducer;\n\n//Thunk middleWare\nexport function fetchData() {\n  return async function fetchDataFromApi(dispatch, getState) {\n    dispatch(setStatus(Enums.LOADING));\n    try {\n      const response = await axios.get(\"http://localhost:8081/foodList\");\n      dispatch(fetchProduct(response.data));\n      dispatch(setStatus(Enums.IDLE));\n    } catch (err) {\n      console.log(err);\n      dispatch(setStatus(Enums.ERROR));\n    }\n  };\n}\nexport function pushData() {\n  const response = axios.post(\"http://localhost:8081/foodList1\", getDataFromCart(state));\n}","map":{"version":3,"names":["createSlice","current","axios","Enums","Object","freeze","IDLE","LOADING","ERROR","foodslice","name","initialState","data","status","cart_data","reducers","setStatus","state","action","payload","fetchProduct","addInsideCart","console","log","quantity","length","push","findIndex","item","id","parseInt","removeInsideCart","map","filter","res","getDataFromCart","actions","reducer","fetchData","fetchDataFromApi","dispatch","getState","response","get","err","pushData","post"],"sources":["D:/OrderManagement/src/app/foodslice.js"],"sourcesContent":["import { createSlice, current } from \"@reduxjs/toolkit\";\r\nimport axios from \"axios\";\r\n\r\nexport const Enums = Object.freeze({\r\n  IDLE: \"idle\",\r\n  LOADING: \"Loading\",\r\n  ERROR: \"error\",\r\n});\r\n\r\nconst foodslice = createSlice({\r\n  name: \"food\",\r\n  initialState: {\r\n    data: [],\r\n    status: Enums.IDLE,\r\n    cart_data: [],\r\n  },\r\n  reducers: {\r\n    setStatus(state, action) {\r\n      state.status = action.payload;\r\n    },\r\n    fetchProduct(state, action) {\r\n      state.data = action.payload;\r\n    },\r\n    addInsideCart(state, action) {\r\n      console.log(action.payload.quantity);\r\n\r\n      if (state.cart_data.length === 0) {\r\n        state.cart_data.push(action.payload);\r\n      } else {\r\n        const findIndex = state.cart_data.findIndex(\r\n          (item) => item.id === action.payload.id\r\n        );\r\n        if (findIndex === -1) {\r\n          state.cart_data.push(action.payload);\r\n        } else\r\n          state.cart_data[findIndex].quantity =\r\n            parseInt(state.cart_data[findIndex].quantity) +\r\n            parseInt(action.payload.quantity);\r\n      }\r\n    },\r\n    removeInsideCart(state, action) {\r\n      console.log(action);\r\n      state.cart_data.map(\r\n        (item) => {\r\n          if (item.id === action.payload) {\r\n            if (item.quantity == 1) {\r\n              state.cart_data = state.cart_data.filter(\r\n                (res) => res.id !== action.payload\r\n              );\r\n            } else item.quantity -= 1;\r\n          }\r\n        }\r\n        // (res) => res.id !== action.payload\r\n      );\r\n    },\r\n    getDataFromCart(state, action) {\r\n      if (state.cart_data.length == 0) {\r\n        console.log(\"Empty inside cart\");\r\n      } else {\r\n        console.log(current(state.cart_data));\r\n      }\r\n    },\r\n  },\r\n});\r\n\r\nexport const {\r\n  setStatus,\r\n  fetchProduct,\r\n  addInsideCart,\r\n  removeInsideCart,\r\n  getDataFromCart,\r\n} = foodslice.actions;\r\nexport default foodslice.reducer;\r\n\r\n//Thunk middleWare\r\nexport function fetchData() {\r\n  return async function fetchDataFromApi(dispatch, getState) {\r\n    dispatch(setStatus(Enums.LOADING));\r\n    try {\r\n      const response = await axios.get(\"http://localhost:8081/foodList\");\r\n      dispatch(fetchProduct(response.data));\r\n      dispatch(setStatus(Enums.IDLE));\r\n    } catch (err) {\r\n      console.log(err);\r\n      dispatch(setStatus(Enums.ERROR));\r\n    }\r\n  };\r\n}\r\n\r\nexport function pushData() {\r\n  const response = axios.post(\r\n    \"http://localhost:8081/foodList1\",\r\n    getDataFromCart(state)\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}